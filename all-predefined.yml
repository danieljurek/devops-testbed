# trigger: 
#   branches:
#     include:
#       - main


jobs: 
  - job: setupazd
    strategy: 
      matrix:
        Windows:
          vmImage: windows-latest
        Linux:
          vmImage: ubuntu-latest
        Mac:
          vmImage: macos-latest

    pool:
      vmImage: $(vmImage)

    steps: 
      - pwsh: |
          try { 
            $result = Invoke-WebRequest -Uri https://azd-release-gfgac2cmf7b8cuay.b02.azurefd.net/azd/standalone/release/stable/azd-linux-amd64.tar.gz
            Write-Host "x-azure-ref: $($result.Headers['x-azure-ref'])"
          } catch { 
            Write-Host "Failure: Invoke-WebRequest threw an error"
            $_ | Write-Host
          }
        displayName: Try downloading azd
